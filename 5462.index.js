"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5462],{36801:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(28276),r=a.n(n),i=a(5368),o=a.n(i)()(r());o.push([e.id,'.backButton{display:inline-block;font-size:.8666em;height:1.5625em;color:#8692a6;background-color:transparent;border:0;cursor:pointer;font-family:"Poppins",sans-serif;padding:0;margin:0;font-weight:500}@media screen and (min-width: 852px){.backButton{font-size:.8421em}}.backButton:lang(he){font-family:"Assistant","sans-serif"}.backButton .icon{margin-inline-end:.375em}.backButton.placeholder{height:1.3em}',""]);const s=o},5199:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(28276),r=a.n(n),i=a(5368),o=a.n(i)()(r());o.push([e.id,'.cardPage{display:flex;flex-direction:column}.cardPage.withBottomPanel .card{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:0}.cardPage .card{position:relative;margin:0 1.2em 1.2em;background-color:#fff;border-radius:11px;overflow-y:auto;display:flex;flex-direction:column;gap:1rem;height:100%;box-sizing:border-box;flex-grow:1;scrollbar-color:#5bc6f9 #dadada;scrollbar-width:thin}@media screen and (max-width: 380px){.cardPage .card{gap:0rem;margin:0 1.2em 1.2em}}.cardPage .card::-webkit-scrollbar{width:3pt}.cardPage .card::-webkit-scrollbar-track{background-color:#dadada;border-radius:3pt}.cardPage .card::-webkit-scrollbar-thumb{background-color:#5bc6f9;border-radius:3pt}.cardPage .card::-webkit-scrollbar-thumb:hover{background-color:#3bb1e7}.cardPage .card .cardTop{border-bottom:1px solid #f1f1f1}.cardPage .card .cardTop .backButton{margin-top:2.0212em;font-size:1.0666em;line-height:1.3081em;color:#000;margin-inline-start:1.0937em}.cardPage .card .cardTop .cardTopHeader{display:flex;align-items:center;justify-content:center;text-align:start;margin-left:1.36667em;margin-right:1.36667em;margin-bottom:1.73333em}.cardPage .card .cardTop .cardTopHeader .titleContainer{display:flex;align-items:center;justify-content:center;margin:2rem auto 0rem auto;gap:1rem}.cardPage .card .cardTop .cardTopHeader .titleContainer:lang(he){font-family:"Assistant","sans-serif"}@media screen and (max-width: 500px){.cardPage .card .cardTop .cardTopHeader .titleContainer:lang(he){margin:2rem 0 0rem auto}}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout{line-height:1.3333em;padding:1em .8333em 1.5em;translate:0 50%;max-width:36em}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout.ms-Callout{font-size:.8em}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout button{background-color:transparent;border:0;cursor:pointer;color:#5bc6f9;font-size:.7708em;padding:0 0 1.1621em 1.1621em}.cardPage .card .cardTop .cardTopHeader .customerDetailCallout button i{height:1em;width:1em}.cardPage .card .cardTop .cardTopHeader button{background-color:#5fcf90;border-radius:50%;border-style:none;color:#fff;margin-inline-start:.4125em;line-height:1em;padding:.25em .63em;cursor:pointer}.cardPage .card .cardTop .cardTopHeader .cardTopHeaderText{font-size:1.66667em;font-weight:700;margin:0}@media screen and (max-width: 500px){.cardPage .card .cardTop .cardTopHeader .cardTopHeaderText{font-size:1.3em}}.cardPage .card .cardTop .cardTopHeader .titleIcon{font-size:1.7333em;margin-left:.32em;margin-right:.32em}.cardPage .buttonContainer{flex:0 0 3.53333em;background-color:#fff;width:100%;border-top:1px solid #dfdfdf;display:flex}.cardPage .buttonContainer .button{font-size:1em;margin:.8em;flex:1}.cardPage .buttonContainer .button .ms-Button-flexContainer{padding:.3333em;line-height:1.308em;height:1.3333em}',""]);const s=o},77550:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(28276),r=a.n(n),i=a(5368),o=a.n(i)()(r());o.push([e.id,".spinner{box-sizing:border-box;border-radius:100%;border-style:solid;border-width:2px;border-color:#8cdbff #8cdbff transparent transparent;border-top:0;position:absolute;top:50%;left:50%;pointer-events:none}.spinner.s0{transform:translate(-50%, -50%) rotate(0)}.spinner.s1{transition:transform 3s linear;transform:translate(-50%, -50%) rotate(0)}.spinner.s2{transition:transform 3s linear;transform:translate(-50%, -50%) rotate(360deg)}",""]);const s=o},49456:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(28276),r=a.n(n),i=a(5368),o=a.n(i)()(r());o.push([e.id,".analyticsPage .card{background-color:transparent;margin-bottom:0}.analyticsPage .card .cardTop{background-color:#fff;border-top-left-radius:11px;border-top-right-radius:11px}.analyticsPage .analytics-header{background-color:#f1f1f1;display:flex;justify-content:space-evenly;font-size:1rem;padding-top:.5rem;align-items:center;gap:1rem}@media screen and (max-width: 500px){.analyticsPage .analytics-header{justify-content:space-between}}.analyticsPage .analytics-header button{margin-top:.2rem;padding:.5rem 1.5rem;border-radius:3px}.analyticsPage .analyticSection{background-color:#fff;border-radius:11px;padding:1.6666em;margin-bottom:1.6em}.analyticsPage .analyticSection .date-Time-picker{display:flex;flex-direction:column;margin:auto;justify-content:center;gap:1rem;align-items:center}.analyticsPage .analyticSection:first-child{border-top-left-radius:0;border-top-right-radius:0}.analyticsPage h2{font-size:1.4em;font-weight:700;margin:0}.analyticsPage .textStat{font-size:1.1333em;margin-top:.3529em;margin-bottom:0;font-weight:600}.analyticsPage .textStat span{font-weight:400}.analyticsPage .dashboard__loading-state{height:100vh;display:flex;justify-content:center;align-items:center}.analyticsPage .charts{display:flex;flex-flow:row wrap;margin-top:1.2666em}.analyticsPage .charts .chart{position:relative;width:100%}@media screen and (max-width: 720px){.analyticsPage .charts{flex-direction:column}.analyticsPage .charts .chart{max-width:100%}}",""]);const s=o},14469:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(51855),r=a(26154),i=a(47562),o=a(78451);function s(e,t={}){const a=(0,r.Z)(),s="undefined"!=typeof window&&void 0!==window.matchMedia,{defaultMatches:l=!1,matchMedia:c=(s?window.matchMedia:null),noSsr:d=!1,ssrMatchMedia:m=null}=(0,i.Z)({name:"MuiUseMediaQuery",props:t,theme:a});let u="function"==typeof e?e(a):e;u=u.replace(/^@media( ?)/m,"");const[g,f]=n.useState((()=>d&&s?c(u).matches:m?m(u).matches:l));return(0,o.Z)((()=>{let e=!0;if(!s)return;const t=c(u),a=()=>{e&&f(t.matches)};return a(),t.addListener(a),()=>{e=!1,t.removeListener(a)}}),[u,c,s]),g}},22405:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(51855),r=a(5591),i=a(72220),o=a(19350);const s=e=>{const t=(0,r.s0)(),a=function(){const[,e]=(0,n.useState)(0);return()=>{e((e=>e+1))}}(),s=sessionStorage.getItem("authToken"),l=localStorage.getItem("credentialToken");return(0,n.useEffect)((()=>{let e=null;return s||(l?(0,i.Z)({credentialTokenUuid:l}).catch((()=>{localStorage.removeItem("credentialToken")})).finally((()=>{a()})):e=setTimeout((()=>{t("/login",{replace:!0})}),3e3)),()=>{e&&clearTimeout(e)}}),[s,l]),s?n.createElement(n.Fragment,null,e.children):l?n.createElement("div",{className:"narrowContent paddedContent"},n.createElement("h1",null,"טוען"),n.createElement(o.Z,null)):n.createElement("div",{className:"narrowContent paddedContent"},n.createElement("h1",null,"אין לך הרשאה לעמוד זה"))}},96816:(e,t,a)=>{a.d(t,{Z:()=>E});var n=a(51855),r=a(38032),i=a(2490),o=a(61495),s=a(93379),l=a.n(s),c=a(7795),d=a.n(c),m=a(90569),u=a.n(m),g=a(3565),f=a.n(g),p=a(19216),y=a.n(p),h=a(44589),b=a.n(h),v=a(36801),w={};w.styleTagTransform=b(),w.setAttributes=f(),w.insert=u().bind(null,"head"),w.domAPI=d(),w.insertStyleElement=y(),l()(v.Z,w),v.Z&&v.Z.locals&&v.Z.locals;const k={en:{back:"Back"},he:{back:"חזור"}},E=e=>{const t=(0,n.useContext)(i.r),a=o.Z.useTranslationNamespace("backButton",(e=>Promise.resolve(k[e]))),s=o.Z.useIsRtl(),l=!!e.override,c=t=>(e.className||"").split(" ").concat(t).join(" ");return t.canGoBack||l?n.createElement("button",{className:c("backButton"),type:"button",onClick:l?e.override:t.goBack},n.createElement(r.J,{iconName:s?"chevronRight":"chevronLeft",className:"icon"}),a("back")):n.createElement("div",{className:c("backButton placeholder")})}},51491:(e,t,a)=>{a.d(t,{Z:()=>E});var n=a(51855),r=a(38032),i=a(96816),o=a(34297),s=a(1285),l=a(93379),c=a.n(l),d=a(7795),m=a.n(d),u=a(90569),g=a.n(u),f=a(3565),p=a.n(f),y=a(19216),h=a.n(y),b=a(44589),v=a.n(b),w=a(5199),k={};k.styleTagTransform=v(),k.setAttributes=p(),k.insert=g().bind(null,"head"),k.domAPI=m(),k.insertStyleElement=h(),c()(w.Z,k),w.Z&&w.Z.locals&&w.Z.locals;const E=e=>{const[t,a]=(0,n.useState)(!1);return n.createElement("div",{className:(l="fullHeight cardPage"+(e.bottomPanel?" withBottomPanel":""),(e.className||"").split(" ").concat(l).join(" "))},n.createElement("div",{className:"card"},n.createElement("div",{className:"cardTop"},!e.hideBack&&n.createElement(i.Z,{override:e.backButtonOverride}),n.createElement("div",{className:"cardTopHeader"},n.createElement("div",{className:"titleContainer"},e.iconName?n.createElement(r.J,{iconName:e.iconName,className:"titleIcon"}):null,n.createElement("h1",{className:"cardTopHeaderText"},e.title)),e.layerInfo?n.createElement(n.Fragment,null,n.createElement("button",{id:"layerGroupInfoButton",type:"button",onClick:()=>a(!0)},"i"),t&&n.createElement(o.U,{className:"customerDetailCallout",target:".seatSetting__numinput-container",onDismiss:()=>a(!1),directionalHint:s.b.topCenter},n.createElement("button",{type:"button",onClick:()=>a(!1)},n.createElement(r.J,{iconName:"times"})),n.createElement("div",null,e.callout))):null)),e.cardContent),e.bottomPanel&&n.createElement("div",{className:e.bottomPanelClass?e.bottomPanelClass:"buttonContainer"},e.bottomPanel));var l}},19350:(e,t,a)=>{a.d(t,{Z:()=>w});var n=a(51855),r=a(9003),i=a(93379),o=a.n(i),s=a(7795),l=a.n(s),c=a(90569),d=a.n(c),m=a(3565),u=a.n(m),g=a(19216),f=a.n(g),p=a(44589),y=a.n(p),h=a(77550),b={};b.styleTagTransform=y(),b.setAttributes=u(),b.insert=d().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=f(),o()(h.Z,b),h.Z&&h.Z.locals&&h.Z.locals;var v=a(14469);const w=e=>{const[t,a]=(0,n.useState)(0),i=(0,n.useRef)(),[o,s]=r.Z.useParentSize(i),l=(0,v.Z)("(max-width:500px)"),c=(0,v.Z)("(max-width:400px)"),d=!e.contentIsNumber&&c?0:!e.contentIsNumber&&l?-50:2,m=(l||c)&&e.contentIsNumber?15:0,u=e.contentIsNumber?d+0+o:o,g=Math.min(s,l?o+d+m:u)/2.3;return(0,n.useEffect)((()=>{const e=function(e,t){const n={callback:()=>{a((e=>(e+1)%3))},desiredTime:Date.now()+t},r=()=>{n.cleared||(Date.now()>=n.desiredTime?n.callback():window.requestAnimationFrame(r))};return window.requestAnimationFrame(r),n}(0,2===t?3e3:0);return()=>{!function(e){e.cleared=!0}(e)}}),[t]),n.createElement("div",{ref:i,className:"spinner"+(()=>{switch(t){case 0:return" s0";case 1:return" s1";case 2:return" s2"}return""})(),style:{width:2*g,height:2*g}})}},65462:(e,t,a)=>{a.r(t),a.d(t,{default:()=>se});var n=a(47835),r=a(51855),i=a(97072),o=a(61495),s=a(54320);const l="label";function c(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function d(e,t){e.labels=t}function m(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;const n=[];e.datasets=t.map((t=>{const r=e.datasets.find((e=>e[a]===t[a]));return r&&t.data&&!n.includes(r)?(n.push(r),Object.assign(r,t),r):Object.assign({},t)}))}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;const a={labels:[],datasets:[]};return d(a,e.labels),m(a,e.datasets,t),a}function g(e,t){let{height:a=150,width:n=300,redraw:i=!1,datasetIdKey:o,type:l,data:g,options:f,plugins:p=[],fallbackContent:y}=e,h=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent"]);const b=(0,r.useRef)(null),v=(0,r.useRef)(),w=()=>{b.current&&(v.current=new s.kL(b.current,{type:l,data:u(g,o),options:f,plugins:p}),c(t,v.current))},k=()=>{c(t,null),v.current&&(v.current.destroy(),v.current=null)};return(0,r.useEffect)((()=>{var e,t;!i&&v.current&&f&&(e=v.current,t=f,e.options=Object.assign({},t))}),[i,f]),(0,r.useEffect)((()=>{!i&&v.current&&d(v.current.config.data,g.labels)}),[i,g.labels]),(0,r.useEffect)((()=>{!i&&v.current&&g.datasets&&m(v.current.config.data,g.datasets,o)}),[i,g.datasets]),(0,r.useEffect)((()=>{v.current&&(i?(k(),setTimeout(w)):v.current.update())}),[i,f,g.labels,g.datasets]),(0,r.useEffect)((()=>(w(),()=>k())),[]),r.createElement("canvas",Object.assign({ref:b,role:"img",height:a,width:n},h),y)}const f=(0,r.forwardRef)(g);function p(e,t){return s.kL.register(t),(0,r.forwardRef)(((t,a)=>r.createElement(f,Object.assign({},t,{ref:a,type:e}))))}const y=p("line",s.ST),h=p("bar",s.vn),b=p("pie",s.tt);var v=a(14469);const w=JSON.parse('{"analytics":"Analytics","second":"second","seconds":"{{seconds}} seconds","minute":"minute","minutes":"{{minutes}} minutes","hour":"hour","hours":"hours","dateLabel":"Select specific Date","hoursAndMinutes":"{{hours}} hours and {{minutes}} minutes","today":"Today","month":"This Month","yesterday":"Yesterday","customise":"Customize","week":"This week","visitorCount":"Visitors:","averageWaitingTimeValue":"Average waiting time:","averageWaitingTime":"Average ","medianWaitingTimeValue":"Median waiting time:","medianWaitingTime":"Median ","notYetServed":"Pending","waitTimes":"Queue wait times","served":"Served","noData":"No data available","satisfied":"Satisfied","state":"Customer State","dissatisfied":"Dissatisfied","feedback":"Customer Feedback","neutral":"Neutral","exited":"Exited","taba":"Tab A","removed":"Removed","sunday":"Su","hrs":"hrs","monday":"Mo","tuesday":"Tu","wednesday":"We","thursday":"Th","friday":"Fr","saturday":"Sa","totalVisitors":"Total visitors this week","byDay":"day","byHour":"By hour"}'),k=JSON.parse('{"analytics":"אנליטיקות","second":"שניה","seconds":"{{seconds}} שניות","minute":"דקה","minutes":"{{minutes}} דקות","hour":"שעה","hours":"שעות","dateLabel":"בחר תאריך ספציפי","hoursAndMinutes":"{{hours}} שעות ו {{minutes}} דקות","today":"היום","month":"החודש","yesterday":"אתמול","customise":"להתאים אישית","week":"השבוע","visitorCount":"מבקרים:","averageWaitingTimeValue":"זמן המתנה ממוצע:","averageWaitingTime":"זמן המתנה ממוצע","medianWaitingTimeValue":"חציון זמן המתנה:","medianWaitingTime":"חציון זמן המתנה","notYetServed":"טרם שורתו","served":"קיבלו שירות","waitTimes":"זמני המתנה בתור    ","noData":"אין נתונים זמינים","satisfied":"מרוצה","state":"מדינת לקוח    ","dissatisfied":"לא מרוצה    ","feedback":"משוב לקוחות    ","neutral":"ניטראלי    ","exited":"יצאו","taba":"לשונית א","removed":"הוצאו","hrs":"שעות","sunday":"ראשון","monday":"שני","tuesday":"שלישי","wednesday":"רביעי","thursday":"חמישי","friday":"שישי","saturday":"שבת","totalVisitors":"סה\\"כ מבקרים","byDay":"לפי יום","byHour":"לפי שעה"}'),E={en:w,he:k};s.kL.register(s.uw,s.f$,s.ZL,s.Dx,s.u,s.De);const T=({analytics:e})=>{(0,v.Z)("(max-width: 700px)");const t=o.Z.useTranslationNamespace("analytics",(e=>Promise.resolve(E[e]))),a=o.Z.useIsRtl(),n={family:`'${a?"Assistant":"Poppins"}', sans-serif`},i={display:!0,rtl:a,labels:{font:n,usePointStyle:!0,boxWidth:20,pointStyle:"rect"},position:"bottom"},s={x:{grid:{drawBorder:!1,color:"#fff"},ticks:{font:n}},y:{title:{font:n},ticks:{font:n}}},l=[t("sunday").toString(),t("monday").toString(),t("tuesday").toString(),t("wednesday").toString(),t("thursday").toString(),t("friday").toString(),t("saturday").toString()];return r.createElement("div",null,r.createElement("div",{className:"chart"},r.createElement(h,{height:230,data:{labels:l,datasets:[{label:t("week"),data:e.byWeekDay.map((e=>e.totalVisitors)),backgroundColor:"#69D6FF"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{datalabels:{formatter:(e,t)=>0===e?"":e,color:"#fff",font:n,textAlign:a?"right":"left"},legend:i},scales:Object.assign(Object.assign({},s),{y:Object.assign(Object.assign({},s.y),{title:Object.assign(Object.assign({},s.y.title),{display:!0})})})}})))};var x=a(16784);s.kL.register(s.uw,s.f$,s.od,s.jn,s.Dx,s.u,s.De);const P={en:w,he:k},S=({type:e,newdata:t})=>{const a=o.Z.useTranslationNamespace("analytics",(e=>Promise.resolve(P[e]))),n=o.Z.useIsRtl(),i={family:`'${n?"Assistant":"Poppins"}', sans-serif`,size:10},s={display:!0,rtl:n,labels:{font:i,usePointStyle:!0,boxWidth:10,pointStyle:"rect"},position:"bottom"};let l=[a("sunday").toString(),a("monday").toString(),a("tuesday").toString(),a("wednesday").toString(),a("thursday").toString(),a("friday").toString(),a("saturday").toString()],c={label:a("byHour"),data:"hours"===e&&t,backgroundColor:"#69D6FF",borderColor:"#69D6FF",tension:.1,yAxisID:"y"},d={label:a("week"),data:"days"===e&&t,backgroundColor:"#69D6FF",tension:.1,borderColor:"#69D6FF",xAxisID:"x"},m="hours"===e?c:d;const u={labels:"hours"===e?["1am","2am","3am","4am","5am","6am","7am","8am","9am","10am","11am","12pm","1pm","2pm","3pm","4pm","5pm","6pm","7pm","8pm","9pm","10pm","11pm","12am"]:l,datasets:[Object.assign({},m)]},g={responsive:!0,maintainAspectRatio:!0,interaction:{mode:"index",intersect:!1},stacked:!1,plugins:{datalabels:{formatter:(e,t)=>0===e?"":e+" "+`${a("hrs")} `,color:"#000",font:i,textAlign:n?"right":"left"},legend:s},scales:{y1:{type:"linear",display:!0,Title:{text:a("hours")},position:"right",grid:{drawOnChartArea:!1}}}};return r.createElement(y,{height:200,plugins:[x.Z],data:u,options:g})},Z={en:w,he:k},C=({feedback:e})=>{const t=o.Z.useTranslationNamespace("analytics",(e=>Promise.resolve(Z[e]))),a=o.Z.useIsRtl(),n={satisfied:0,dissatisfied:0,neutral:0};e.forEach((e=>{0===e.rating||2===e.rating?n.dissatisfied++:e.rating>=3&&e.rating<=4?n.neutral++:5===e.rating&&n.satisfied++}));const i={family:`'${a?"Assistant":"Poppins"}', sans-serif`},s={display:!0,rtl:a,labels:{font:i,usePointStyle:!0,boxWidth:10,pointStyle:"rect"},position:"bottom"};return r.createElement("div",{className:"chartContainer"},r.createElement("div",{className:"chart"},0===e.length?r.createElement("div",{style:{width:"100%",display:"flex"}},r.createElement("div",{style:{margin:"auto",fontSize:"0.8em"}},t("noData"))):r.createElement(b,{height:250,plugins:[x.Z],data:{labels:[t("satisfied").toString(),t("dissatisfied").toString(),t("neutral").toString()],datasets:[{data:[n.satisfied,n.dissatisfied,n.neutral],backgroundColor:["#36A2EB","#FF6384","#FFCE56"]}]},options:{maintainAspectRatio:!1,plugins:{datalabels:{formatter:(e,t)=>{if(0===e)return"";const a=t.chart.data.datasets[0].data.reduce(((e,t)=>e+t),0);return`${Math.round(e/a*100)}%`},color:"#000",font:i,textAlign:a?"right":"left"},legend:s}}})))},D={en:w,he:k},N=({byWeekDay:e})=>{const t=o.Z.useTranslationNamespace("analytics",(e=>Promise.resolve(D[e]))),a=o.Z.useIsRtl(),n={family:`'${a?"Assistant":"Poppins"}', sans-serif`},i={display:!0,rtl:a,labels:{font:n,usePointStyle:!0,boxWidth:10,pointStyle:"rect"},position:"bottom"},s=e.reduce(((e,t)=>(Object.entries(t.leaveReasons).forEach((([t,a])=>{e[t]?e[t]+=a:e[t]=a})),e)),{null:0,served:0,quit:0,removed:0}),{null:l,quit:c,removed:d,served:m}=e&&e.length>1?s:e[0].leaveReasons;return r.createElement("div",{className:"chartContainer"},r.createElement("div",{className:"chart"},0===l&&0===c&&0===d&&0===m?r.createElement("div",{style:{width:"100%",display:"flex"}},r.createElement("div",{style:{margin:"auto",fontSize:"0.8em"}},t("noData"))):r.createElement(b,{height:250,plugins:[x.Z],data:{labels:[t("notYetServed").toString(),t("served").toString(),t("exited").toString(),t("removed").toString()],datasets:[{data:[l,m,c,d],backgroundColor:["#762EFF","#69D6FF","#D2F3FF","#E6E6E6"]}]},options:{maintainAspectRatio:!1,plugins:{datalabels:{formatter:(e,t)=>{if(0===e)return"";const a=t.chart.data.datasets[0].data.reduce(((e,t)=>e+t),0);return`${Math.round(e/a*100)}%`},color:"#000",font:n,textAlign:a?"right":"left"},legend:i}}})))},A={en:w,he:k},I=({analytics:e,byWeekDay:t,feedback:a})=>{const n={};t.length>1&&(n.type="days",n.data=t.map((e=>new Date(null==e?void 0:e.totalWaitingTime).getHours()))),1===t.length&&(n.type="hours",n.data=t.map((e=>e.waitingTimes.map((e=>new Date(e.waitingTimes.reduce(((e,t)=>e+t),0)).getHours()))))[0]),console.log(t);const i=o.Z.useTranslationNamespace("analytics",(e=>Promise.resolve(A[e])));return r.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"2rem",marginTop:"2rem"}},r.createElement("h2",null,i("state")),r.createElement(N,{byWeekDay:t}),r.createElement("h2",null,i("waitTimes")),r.createElement(S,{newdata:null==n?void 0:n.data,type:null==n?void 0:n.type}),r.createElement("h2",null,i("totalVisitors")),r.createElement(T,{analytics:e}),r.createElement("h2",null,i("feedback")),r.createElement(C,{feedback:a}))};var O=a(69451),W=a(38032),F=a(86828),j=a(34366),z=a(61640),B=a(41353),H=a(82311),R=a(22405),L=a(5591),M=a(49470),q=a(93379),V=a.n(q),$=a(7795),J=a.n($),Y=a(90569),G=a.n(Y),K=a(3565),U=a.n(K),_=a(19216),Q=a.n(_),X=a(44589),ee=a.n(X),te=a(49456),ae={};ae.styleTagTransform=ee(),ae.setAttributes=U(),ae.insert=G().bind(null,"head"),ae.domAPI=J(),ae.insertStyleElement=Q(),V()(te.Z,ae),te.Z&&te.Z.locals&&te.Z.locals;var ne=a(43691),re=a(51491),ie=function(e,t,a,n){return new(a||(a=Promise))((function(r,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))};const oe={en:w,he:k},se=()=>{const e=o.Z.useTranslationNamespace("analytics",(e=>Promise.resolve(oe[e]))),t=o.Z.useIsRtl(),a=[e("today"),e("yesterday"),e("week"),e("month"),e("customise")],[s,l]=(0,r.useState)(null),c={[e("today")]:"Today",[e("yesterday")]:"Yesterday",[e("week")]:"This week",[e("month")]:"This Month",[e("customise")]:"Customize"},[d,m]=r.useState(c[e("today")]),[u,g]=r.useState(""),[f,p]=(0,r.useState)(null),[y,h]=(0,r.useState)([]),[b,v]=(0,r.useState)(),w=(0,L.s0)(),{queueGroupId:k}=(0,L.UO)();return(0,O.a)({queryKey:["analytic",k],queryFn:()=>ie(void 0,void 0,void 0,(function*(){return yield M.Z.queueGroup.analytic.get(k,(new Date).getTimezoneOffset())})),onSuccess(e){l(e)},onError:e=>console.error(e)}),(0,O.a)({queryKey:["feedback",k],queryFn:()=>ie(void 0,void 0,void 0,(function*(){const e=yield M.Z.feedback.get(k);return console.log(e),e})),onSuccess(e){h(e)},onError:e=>console.error(e)}),s?r.createElement(R.Z,null,r.createElement(ne.Z,{hideBackButton:!0,menuProps:{canLogOut:!0}}),r.createElement(re.Z,{className:"analyticsPage",title:e("analytics"),backButtonOverride:()=>w("/restaurant/settings"),iconName:"chartLine",cardContent:r.createElement("div",null,r.createElement(L.Z5,null,r.createElement(L.AW,{path:"/",element:(()=>{let i=e("today");const o=s&&s.byWeekDay;let l=s.byWeekDay&&[null==s?void 0:s.byWeekDay[(0,n.Z)(new Date)]];const d=(0,n.Z)(new Date)-1==-1?6:(0,n.Z)(new Date),h={[c[e("today")]]:s&&[s.byWeekDay[(0,n.Z)(new Date)]],[c[e("yesterday")]]:s&&[s.byWeekDay[d-1]],[c[e("week")]]:o,[c[e("month")]]:o,[c[e("customise")]]:s&&[s.byWeekDay[(0,n.Z)(new Date)]]};return r.createElement("div",{className:"cardContent"},r.createElement("div",{className:"analyticSection"},r.createElement("div",{className:"date-Time-picker"},r.createElement(j.Z,{sx:{m:1,width:300}},r.createElement(z.Z,{labelId:"demo-select-small",id:"demo-select-small",value:u||i,fullWidth:!0,onChange:e=>{g(e.target.value),v(h[c[e.target.value]]),m(c[e.target.value]),p(null)}},a.map((e=>r.createElement(B.Z,{key:e,value:e},e))))),r.createElement(F.Z,{label:e("dateLabel"),value:f,onChange:e=>{null!==e?(v([s.byWeekDay[(0,n.Z)(e)]]),p(e),m(null)):v([s.byWeekDay[(0,n.Z)(new Date)]])},renderInput:e=>r.createElement(H.Z,Object.assign({},e,{variant:"outlined",size:"medium",style:{minWidth:"300px"}})),components:{LeftArrowIcon:()=>r.createElement(W.J,{iconName:t?"chevronRight":"chevronLeft"}),RightArrowIcon:()=>r.createElement(W.J,{iconName:t?"chevronLeft":"chevronRight"})}})),r.createElement(I,{analytics:s,byWeekDay:b||l,feedback:y})))})()})))})):r.createElement(i.V,null)}},9003:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(51855);const r={useParentSize:function(e){const[t,a]=(0,n.useState)(0),[r,i]=(0,n.useState)(0),o=e.current&&e.current.parentElement;return(0,n.useLayoutEffect)((()=>{if(!o)return()=>{};const e=()=>{const e=o.clientHeight,n=o.clientWidth;let s=e<=140?98:5;t!==e&&a(e+(e<=79?98:5)),r!==n&&i(n+s)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}})),[r,t]}}}}]);